import{d as xe,r as m,v as Z,l as c,w as ye,o as _e,m as we,a as _,b as t,n as w,u as d,e as f,h,t as o,F as J,f as X,q as Me,p as W,x as ke,i as Se,j as M,s as Re,_ as Te}from"./index-BvOaJSXW.js";import{R as Ee,a as D,b as Fe}from"./resources-B117707i.js";import{A as Ce}from"./arrow-left-CxawHIp-.js";import{T as Ae}from"./trophy-C9pwcYaj.js";import{S as ee}from"./sparkles-DONAmAup.js";import{S as Le}from"./shield-CDn_KcM_.js";import{T as te}from"./timer-BowEjOfW.js";import{F as je}from"./flame-XmmC3wQy.js";import{Z as Be}from"./zap-DWMI06Y8.js";const ze={class:"relative min-h-screen overflow-hidden bg-slate-950 py-10"},Pe={class:"relative z-10 mx-auto flex w-full max-w-6xl flex-col gap-10 px-4 lg:flex-row lg:items-start"},We={class:"flex-1 space-y-6"},De={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ne={class:"flex items-center gap-2 rounded-lg border border-primary/30 bg-card/80 px-4 py-2 text-sm text-foreground backdrop-blur"},Ie={class:"flex flex-col leading-tight text-right"},$e={class:"text-[10px] uppercase tracking-widest text-muted-foreground"},Ve={class:"text-lg font-semibold text-foreground"},He={class:"relative overflow-hidden rounded-3xl border border-primary/15 bg-slate-900/70 shadow-[0_20px_60px_rgba(15,23,42,0.55)] backdrop-blur"},Oe={class:"relative"},Ge={class:"flex items-center justify-between px-6 py-5"},Ke={class:"max-w-xs text-right"},Ye={class:"mt-1 text-sm font-medium text-foreground"},qe={class:"relative px-6 pb-10 pt-4"},Ue={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4"},Qe={class:"flex items-center justify-between text-sm font-semibold text-foreground"},Ze={class:"rune-key"},Je={class:"rune-lane"},Xe={key:0,class:"absolute inset-0 z-20 flex items-center justify-center bg-slate-950/85 backdrop-blur-md"},et={class:"flex max-w-lg flex-col items-center gap-4 rounded-2xl border border-primary/30 bg-slate-900/80 px-10 py-12 text-center shadow-[0_30px_80px_rgba(14,23,42,0.65)]"},tt={class:"text-2xl font-bold text-foreground sm:text-3xl"},st={class:"text-sm text-muted-foreground sm:text-base"},at={class:"text-xs uppercase tracking-[0.35em] text-muted-foreground"},rt={class:"flex w-full max-w-md flex-col gap-6"},ot={class:"rounded-3xl border border-primary/15 bg-slate-900/70 p-6 shadow-[0_18px_50px_rgba(15,23,42,0.45)] backdrop-blur"},nt={class:"mt-4 space-y-5"},lt={class:"flex items-center justify-between text-xs font-semibold uppercase tracking-widest text-muted-foreground"},it={class:"flex items-center gap-2"},dt={class:"text-sm text-foreground"},ut={class:"mt-2 h-2 w-full overflow-hidden rounded-full bg-slate-800/80"},ct={class:"flex items-center justify-between text-xs font-semibold uppercase tracking-widest text-muted-foreground"},ft={class:"flex items-center gap-2"},mt={class:"text-sm text-foreground"},gt={class:"mt-2 h-2 w-full overflow-hidden rounded-full bg-slate-800/80"},pt={class:"flex items-center justify-between text-sm"},ht={class:"flex items-center gap-2 text-muted-foreground"},vt={class:"font-semibold text-foreground"},bt={class:"flex items-center justify-between text-sm"},xt={class:"flex items-center gap-2 text-muted-foreground"},yt={class:"font-semibold text-foreground"},_t={class:"flex items-center justify-between text-sm"},wt={class:"flex items-center gap-2 text-muted-foreground"},Mt={class:"font-semibold text-foreground"},kt={class:"flex items-center justify-between text-sm"},St={class:"flex items-center gap-2 text-muted-foreground"},k="dragonFire",A=6e4,Rt=-.55,S=.78,se=.9,Tt=3,Et=5,Ft="group inline-flex items-center gap-2 rounded-md border border-border bg-card/70 px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-card focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary",Ct="inline-flex items-center justify-center gap-2 rounded-md bg-gradient-to-r from-primary via-accent to-primary px-6 py-2 text-sm font-semibold text-primary-foreground shadow-lg transition hover:from-primary/90 hover:via-accent/90 hover:to-primary/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-accent",At=xe({__name:"ForgeMaster",setup(Lt){const ae=Se(),R=[{id:0,label:"Auric Sigil",key:"Q"},{id:1,label:"Blaze Sigil",key:"W"},{id:2,label:"Ember Sigil",key:"E"},{id:3,label:"Ash Sigil",key:"R"}],re=R.reduce((s,e)=>(s[e.key.toLowerCase()]=e.id,s),{}),l=m("ready"),L=Ee[k],T=m(D(k)),r=m(100),v=m(0),g=m(0),E=m(0),p=m(0),n=m("Streams emerge early - hit them when the rune flares gold within the glowing band."),u=Z([]),F=Z(R.map(()=>({active:!1,timer:0}))),j=c(()=>Math.max(0,Math.round(r.value))),oe=c(()=>Math.min(100,Math.round(p.value/A*100))),ne=c(()=>Math.min(A/1e3,Math.floor(p.value/1e3))),le=c(()=>Math.max(0,Math.ceil((A-p.value)/1e3))),N=c(()=>l.value!=="running"),I=c(()=>{const s=j.value;return s<=20?{label:"critical",class:"text-rose-400"}:s<=55?{label:"strained",class:"text-amber-300"}:{label:"stable",class:"text-emerald-300"}}),ie=c(()=>{switch(l.value){case"victory":return"Flames Conquered";case"defeat":return"Ward Broken";default:return"Forge Master"}}),de=c(()=>{switch(l.value){case"victory":return"You bent the molten torrents back upon themselves. The forge glows brighter with your legend.";case"defeat":return"The ward collapsed under the torrent. Steady your focus and try again.";default:return"Align the sigils (Q / W / E / R) as the flames descend. Hold focus for the full 60 seconds while keeping the ward intact."}}),ue=c(()=>{switch(l.value){case"victory":return"Run the Ritual Again";case"defeat":return"Retry the Defense";default:return"Begin the Ritual"}}),$=["Rune aligned! The torrent bends.","Sigil pulses - flame redirected.","Channel steady! Fire diverted.","The ward hums as the flame recoils."],V=["Rune misfire! Flux destabilizes.","Static surge - sigil faltered.","Focus slips and the ward strains.","The glyph fizzles. Regain rhythm!"],H=["Scorch marks snake across the ward!","Flames lash the barrier - hold steady!","The ward buckles under the heat!"],O=["Too soon! Hold the channel a breath longer.","Sigil flickers. Wait for the strike zone.","Premature surge destabilizes the glyph."],G=["The flame slips past - react faster!","Timing lagged. The torrent clips the ward.","Almost caught it. Keep your rhythm sharp."];let b=null,y=0,C=0,K=0,B=-1,z=!1;const P=()=>{b!==null&&(cancelAnimationFrame(b),b=null)},ce=()=>{P(),v.value=0,g.value=0,E.value=0,r.value=100,p.value=0,n.value="Streams emerge early - hit them when the rune flares gold within the glowing band.",u.splice(0,u.length),F.forEach(s=>{s.active=!1,s.timer=0}),C=0,B=-1,z=!1},Y=()=>Math.max(650,1600-v.value*32-Math.floor(p.value/1e3)*4),fe=()=>{if(u.length>=10)return;const s=R.filter(a=>a.id!==B),e=s[Math.floor(Math.random()*s.length)];B=e.id,K+=1,u.push({id:`stream-${K}`,lane:e.id,progress:Rt,speed:.38+Math.random()*.12+v.value*.012,intensity:10+Math.floor(v.value/4)+Math.floor(Math.random()*4),state:"flying",life:0})},me=s=>{F.forEach(e=>{e.timer>0&&(e.timer=Math.max(0,e.timer-s),e.timer===0&&(e.active=!1))})},x=s=>{l.value==="running"&&(l.value=s,P(),s==="victory"?n.value="The inferno yields to your mastery.":n.value="The ward collapses in flame. Regroup and return.")},ge=s=>{for(let e=u.length-1;e>=0;e-=1){const a=u[e];if(a.state==="flying"){if(a.progress+=a.speed*s/1e3,a.progress>=1&&(a.state="burned",a.life=260,a.progress=1,g.value=0,r.value=Math.max(0,r.value-a.intensity),n.value=H[Math.floor(Math.random()*H.length)],r.value<=0)){n.value="The ward is consumed by the inferno!",x("defeat");return}}else{if(a.life-=s,a.life<=0){u.splice(e,1);continue}a.state==="deflected"&&(a.progress=Math.max(-.35,a.progress-s/1e3*.9))}}},q=s=>{if(l.value!=="running"){b=null;return}y||(y=s);const e=Math.min(120,s-y);if(y=s,p.value+=e,p.value>=A){r.value>0?x("victory"):x("defeat");return}C+=e;let a=Y();for(;C>=a;)C-=a,fe(),a=Y();me(e),ge(e),b=requestAnimationFrame(q)},pe=s=>{if(l.value!=="running")return;const e=F[s];e.active=!0,e.timer=220;let a=null;for(const i of u)i.lane!==s||i.state!=="flying"||i.progress<.3||i.progress>1.05||(!a||i.progress>a.progress)&&(a=i);a?a.progress>=S&&a.progress<=se?(a.state="deflected",a.life=320,a.progress=Math.min(a.progress,.92),v.value+=1,g.value+=1,E.value=Math.max(E.value,g.value),n.value=$[Math.floor(Math.random()*$.length)]):a.progress<S?(g.value=0,r.value=Math.max(0,r.value-Tt),n.value=O[Math.floor(Math.random()*O.length)],r.value<=0&&(n.value="The ward splinters under the mistimed surge!",x("defeat"))):(a.state="burned",a.life=320,a.progress=1,g.value=0,r.value=Math.max(0,r.value-Et),n.value=G[Math.floor(Math.random()*G.length)],r.value<=0&&(n.value="The ward splinters under the mistimed surge!",x("defeat"))):(g.value=0,r.value=Math.max(0,r.value-4),n.value=V[Math.floor(Math.random()*V.length)],r.value<=0&&(n.value="The ward splinters under the stray flame!",x("defeat")))},he=s=>u.filter(e=>e.lane===s),ve=s=>{const e=["fire-stream",s.state];return s.state==="flying"&&(s.progress>=S&&s.progress<=se?e.push("ready"):s.progress>=S-.08&&s.progress<S&&e.push("prepare")),e},be=s=>{const e=.85+s.intensity/40;if(s.state==="flying")return{top:`${(s.progress+.17)*100}%`,"--stream-scale":e.toFixed(2)};const a=Math.max(0,Math.min(1,s.life/280));return{top:`${s.state==="burned"?102:s.progress*120}%`,opacity:a,"--stream-scale":e.toFixed(2)}},U=()=>{l.value!=="running"&&(ce(),l.value="running",y=0,b=requestAnimationFrame(q))},Q=s=>{if(s.repeat)return;const e=s.key.toLowerCase();if(N.value&&e==="enter"){s.preventDefault(),U();return}const a=re[e];a!==void 0&&(s.preventDefault(),pe(a))};return ye(()=>l.value,s=>{s==="running"&&(T.value=D(k)),s==="victory"&&!z&&(T.value=Fe(k),z=!0,Re({title:`${L.plural} Secured`,description:`Flame bows to your command. ${L.singular} captured.`,variant:"success"}))}),_e(()=>{window.addEventListener("keydown",Q),T.value=D(k)}),we(()=>{P(),window.removeEventListener("keydown",Q)}),(s,e)=>(M(),_("div",ze,[e[16]||(e[16]=t("div",{class:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(59,130,246,0.18),_transparent_60%)]"},null,-1)),e[17]||(e[17]=t("div",{class:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(239,68,68,0.12),_transparent_55%)]"},null,-1)),t("main",Pe,[t("div",We,[t("div",De,[t("button",{type:"button",class:w(Ft),onClick:e[0]||(e[0]=a=>d(ae).push("/"))},[f(d(Ce),{class:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"}),e[1]||(e[1]=h(" Return ",-1))]),t("div",Ne,[f(d(Ae),{class:"h-5 w-5 text-accent"}),t("div",Ie,[t("span",$e,o(d(L).plural),1),t("span",Ve,o(T.value),1)])])]),t("div",He,[e[7]||(e[7]=t("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(14,116,144,0.12),_transparent_55%)]"},null,-1)),t("div",Oe,[t("div",Ge,[e[3]||(e[3]=t("div",null,[t("p",{class:"text-xs font-semibold uppercase tracking-[0.35em] text-primary/70"}," Forge Master "),t("h1",{class:"mt-1 text-3xl font-bold tracking-tight text-foreground sm:text-4xl"}," Sigil Convergence ")],-1)),t("div",Ke,[e[2]||(e[2]=t("p",{class:"text-xs font-semibold uppercase tracking-[0.28em] text-muted-foreground"}," Status Feed ",-1)),t("p",Ye,o(n.value),1)])]),t("div",qe,[t("div",Ue,[(M(),_(J,null,X(R,a=>t("div",{key:a.id,class:w(["rune-card",F[a.id].active?"rune-card-active":""])},[t("div",Qe,[t("span",null,o(a.label),1),t("span",Ze,o(a.key),1)]),t("div",Je,[e[4]||(e[4]=t("div",{class:"flow-channel"},null,-1)),e[5]||(e[5]=t("div",{class:"hit-zone"},null,-1)),(M(!0),_(J,null,X(he(a.id),i=>(M(),_("div",{key:i.id,class:w(ve(i)),style:W(be(i))},null,6))),128))]),e[6]||(e[6]=t("p",{class:"rune-glyph"},"Channel",-1))],2)),64))]),N.value?(M(),_("div",Xe,[t("div",et,[f(d(ee),{class:"h-10 w-10 text-accent"}),t("h2",tt,o(ie.value),1),t("p",st,o(de.value),1),t("button",{type:"button",class:w(Ct),onClick:U},o(ue.value),1),t("p",at," Press Enter to "+o(l.value==="ready"?"Begin":"Restart"),1)])])):Me("",!0)])])])]),t("aside",rt,[t("div",ot,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold text-foreground"},"Ritual Diagnostics",-1)),t("div",nt,[t("div",null,[t("div",lt,[t("span",it,[f(d(Le),{class:"h-4 w-4 text-emerald-400"}),e[8]||(e[8]=h(" Ward Integrity ",-1))]),t("span",dt,o(j.value)+"%",1)]),t("div",ut,[t("div",{class:"h-full rounded-full bg-gradient-to-r from-emerald-400 via-emerald-500 to-sky-500 transition-all duration-300",style:W({width:`${j.value}%`})},null,4)])]),t("div",null,[t("div",ct,[t("span",ft,[f(d(te),{class:"h-4 w-4 text-amber-300"}),e[9]||(e[9]=h(" Ritual Duration ",-1))]),t("span",mt,o(ne.value)+"s / 60s",1)]),t("div",gt,[t("div",{class:"h-full rounded-full bg-gradient-to-r from-orange-400 via-rose-500 to-purple-500 transition-all duration-300",style:W({width:`${oe.value}%`})},null,4)])]),t("div",pt,[t("span",ht,[f(d(je),{class:"h-4 w-4 text-orange-400"}),e[10]||(e[10]=h(" Fires Deflected ",-1))]),t("span",vt,o(v.value),1)]),t("div",bt,[t("span",xt,[f(d(Be),{class:"h-4 w-4 text-sky-400"}),e[11]||(e[11]=h(" Max Combo ",-1))]),t("span",yt,o(E.value),1)]),t("div",_t,[t("span",wt,[f(d(te),{class:"h-4 w-4 text-amber-300"}),e[12]||(e[12]=h(" Time Remaining ",-1))]),t("span",Mt,o(le.value)+"s",1)]),t("div",kt,[t("span",St,[f(d(ee),{class:"h-4 w-4 text-purple-300"}),e[13]||(e[13]=h(" Threat Level ",-1))]),t("span",{class:w(["font-semibold uppercase tracking-wide",I.value.class])},o(I.value.label.toUpperCase()),3)])])]),e[15]||(e[15]=ke('<div class="rounded-3xl border border-primary/15 bg-slate-900/60 p-6 shadow-[0_18px_50px_rgba(15,23,42,0.45)] backdrop-blur" data-v-b23ffcfb><h3 class="text-lg font-semibold text-foreground" data-v-b23ffcfb>Battle Briefing</h3><ul class="mt-4 space-y-4 text-sm text-muted-foreground" data-v-b23ffcfb><li class="flex items-start gap-3" data-v-b23ffcfb><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full border border-primary/40 bg-primary/20 text-xs font-bold tracking-[0.25em] text-primary" data-v-b23ffcfb> 1 </span><p data-v-b23ffcfb>Press <strong data-v-b23ffcfb>Q/W/E/R</strong> to channel the matching sigil when a flame nears the ward.</p></li><li class="flex items-start gap-3" data-v-b23ffcfb><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full border border-primary/40 bg-primary/20 text-xs font-bold tracking-[0.25em] text-primary" data-v-b23ffcfb> 2 </span><p data-v-b23ffcfb>Hold out for <strong data-v-b23ffcfb>60 seconds</strong> while keeping the ward from collapsing.</p></li><li class="flex items-start gap-3" data-v-b23ffcfb><span class="mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full border border-primary/40 bg-primary/20 text-xs font-bold tracking-[0.25em] text-primary" data-v-b23ffcfb> 3 </span><p data-v-b23ffcfb>The glowing hit zone is tight; mistiming drains the ward fast. Keep your combo alive for speed.</p></li></ul></div>',1))])])]))}}),Ht=Te(At,[["__scopeId","data-v-b23ffcfb"]]);export{Ht as default};
