import{d as Ze,r as _,v as ie,l as M,o as He,m as Je,a as v,b as r,n as G,e as P,u as E,h as L,t as f,p as ce,F as H,f as J,q as I,i as Qe,j as h,s as de,_ as Xe}from"./index-B48t8f1O.js";import{R as et,a as tt,b as ot}from"./resources-B117707i.js";import{A as rt}from"./arrow-left-BHJnkpsX.js";import{T as st}from"./trophy-CywtLe5a.js";import{C as ue}from"./coins-Djh2HnYv.js";import{S as at}from"./shield-DGNIyOE3.js";import{F as lt}from"./flame-BNfP7fCt.js";import{Z as nt}from"./zap-C5iSBJ3R.js";const it={class:"relative min-h-screen overflow-hidden bg-[var(--gradient-game)] p-4 md:p-8"},ct={class:"relative z-10 mx-auto max-w-6xl space-y-8"},dt={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},ut={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4"},ft={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},pt={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},gt={class:"mt-1 text-2xl font-semibold text-foreground"},vt={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},ht={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},mt={class:"mt-1 text-2xl font-semibold text-foreground"},bt={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},wt={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},xt={class:"mt-1 text-2xl font-semibold text-foreground"},_t={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},yt={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},kt={class:"mt-1 text-2xl font-semibold text-foreground"},Rt={class:"grid gap-6 lg:grid-cols-[2fr_1fr]"},Ct={class:"rounded-xl border border-border/60 bg-card/80 p-6 backdrop-blur"},Mt={class:"flex flex-col gap-6"},Dt={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Et={class:"rounded-lg border border-border/60 bg-card/70 px-4 py-3 text-sm text-muted-foreground backdrop-blur"},St={class:"relative flex justify-center"},Tt={class:"relative w-full max-w-4xl overflow-visible rounded-2xl border border-border/60 bg-gradient-to-br from-slate-950/70 via-slate-900/80 to-black/70 p-6 shadow-[inset_0_0_48px_rgba(0,0,0,0.6)]"},At={key:0,class:"h-2.5 w-2.5 rounded-full bg-amber-300 shadow-[0_0_12px_rgba(250,204,21,0.6)]"},Pt={key:1,class:"h-4 w-4 rounded-full bg-gradient-to-br from-amber-300 via-yellow-200 to-amber-400 shadow-[0_0_18px_rgba(253,224,71,0.8)]"},Lt={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-slate-950/80 text-center backdrop-blur"},Ot={class:"text-2xl font-semibold text-foreground"},$t={class:"mt-3 max-w-md text-sm text-muted-foreground"},jt={class:"flex flex-wrap items-center justify-between gap-4 text-sm text-muted-foreground"},Bt={class:"flex flex-wrap items-center gap-3"},Gt={class:"inline-flex items-center gap-2 rounded-full border border-border/60 bg-card/70 px-3 py-1 text-foreground"},Nt={key:0},Wt={key:1},zt={class:"rounded-xl border border-border/60 bg-card/70 p-6 text-sm text-muted-foreground backdrop-blur"},Ft={class:"flex items-center justify-between"},Yt={class:"flex items-center gap-2 rounded-lg border border-border/60 bg-card/80 px-3 py-1 text-xs font-semibold text-foreground"},It={class:"mt-4 space-y-4"},Ut={class:"rounded-lg border border-border/60 bg-card/60 p-4"},Kt={class:"mt-2 space-y-1 text-xs leading-relaxed"},Vt={class:"rounded-lg border border-border/60 bg-card/60 p-4"},qt={class:"mt-2 space-y-1 text-xs leading-relaxed"},Zt={class:"font-medium text-foreground"},Q="goldRush",y=19,k=19,Ht="group inline-flex items-center gap-2 rounded-md border border-border bg-card/70 px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-card focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary",Jt="inline-flex items-center justify-center gap-2 rounded-md bg-gradient-to-r from-primary via-accent to-primary px-5 py-2 text-sm font-semibold text-primary-foreground shadow-lg transition hover:from-primary/90 hover:via-accent/90 hover:to-primary/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-accent",Qt=Ze({__name:"GoldRush",setup(Xt){const fe=Qe(),N=et[Q],X=_(tt(Q)),S=_(1),O=_(0),W=_(3),T=_(0),ee=_(0),w=_("Scout the tunnels and prepare to gather gold."),d=_("ready"),R=_(!1),D=_(0),m=_([]),n=ie({row:0,col:0,direction:"left",nextDirection:"left"}),C=ie([]),x=Math.floor(y/2),b=Math.floor(k/2),z={row:y-6,col:Math.floor(k/2)},j=[{row:x-1,col:b,colorClass:"from-amber-500 via-orange-400 to-amber-600",label:"Foreman"},{row:x,col:b-1,colorClass:"from-emerald-500 via-lime-400 to-emerald-600",label:"Scout"},{row:x,col:b+1,colorClass:"from-fuchsia-500 via-purple-400 to-fuchsia-600",label:"Warden"}],A={up:{row:-1,col:0},down:{row:1,col:0},left:{row:0,col:-1},right:{row:0,col:1}},te={up:"down",down:"up",left:"right",right:"left"},pe=e=>{for(let t=e.length-1;t>0;t-=1){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}},ge=()=>{const e=Array.from({length:y},()=>Array.from({length:k},()=>!1)),t=[],o={row:1,col:1};e[o.row][o.col]=!0,t.push(o);const s=[{row:-2,col:0},{row:2,col:0},{row:0,col:-2},{row:0,col:2}];for(;t.length;){const a=t[t.length-1],i=[...s];pe(i);let g=!1;for(const p of i){const c=a.row+p.row,l=a.col+p.col;if(c<=0||c>=y-1||l<=0||l>=k-1||e[c][l])continue;const u=a.row+p.row/2,Z=a.col+p.col/2;e[u][Z]=!0,e[c][l]=!0,t.push({row:c,col:l}),g=!0;break}g||t.pop()}return e},ve=e=>{const t=Math.floor(y*k/6);for(let o=0;o<t;o+=1){const s=1+Math.floor(Math.random()*(y-2)),a=1+Math.floor(Math.random()*(k-2));if(e[s][a])continue;[e[s-1][a],e[s+1][a],e[s][a-1],e[s][a+1]].filter(Boolean).length>=2&&(e[s][a]=!0)}},he=e=>{for(let t=x-1;t<=x+1;t+=1)for(let o=b-2;o<=b+2;o+=1)e[t][o]=!0;for(let t=b-3;t<=b+3;t+=1)e[x][t]=!0;for(let t=Math.max(1,x-3);t<=z.row;t+=1)e[t][b]=!0},me=e=>e.map(t=>t.map(o=>o?"gold":"wall")),be=(e,t)=>{var a;if(((a=e[t.row])==null?void 0:a[t.col])==="wall")return 0;const o=new Set,s=[t];for(o.add(`${t.row}-${t.col}`);s.length;){const i=s.shift();for(const g of Object.values(A)){const p=i.row+g.row,c=i.col+g.col;if(p<0||p>=y||c<0||c>=k||e[p][c]==="wall")continue;const l=`${p}-${c}`;o.has(l)||(o.add(l),s.push({row:p,col:c}))}}return o.size},we=()=>{const e=z,t=[{row:1,col:1},{row:1,col:k-2},{row:y-2,col:1},{row:y-2,col:k-2}];for(let s=0;s<25;s+=1){const a=ge();ve(a),a[e.row][e.col]=!0,t.forEach(({row:l,col:u})=>{a[l][u]=!0}),he(a);const i=me(a);for(let l=x-1;l<=x+1;l+=1)for(let u=b-2;u<=b+2;u+=1)i[l][u]="empty";[e,...j.map(({row:l,col:u})=>({row:l,col:u}))].forEach(({row:l,col:u})=>{i[l][u]="empty"}),t.forEach(({row:l,col:u})=>{i[l][u]="power"});const p=i.reduce((l,u)=>l+u.filter(Z=>Z!=="wall").length,0);if(be(i,e)===p)return i}const o=Array.from({length:y},(s,a)=>Array.from({length:k},(i,g)=>a===0||a===y-1||g===0||g===k-1?"wall":"gold"));for(let s=x-1;s<=x+1;s+=1)for(let a=b-2;a<=b+2;a+=1)o[s][a]="empty";return o[e.row][e.col]="empty",j.forEach(({row:s,col:a})=>{o[s][a]="empty"}),t.forEach(({row:s,col:a})=>{o[s][a]="power"}),o},xe=M(()=>m.value.flatMap((e,t)=>e.map((o,s)=>({row:t,col:s,tile:o,key:`cell-${t}-${s}`})))),_e=M(()=>{var e;return{gridTemplateColumns:`repeat(${((e=m.value[0])==null?void 0:e.length)??0}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${m.value.length}, minmax(0, 1fr))`}}),F=M(()=>ee.value),B=M(()=>Math.max(0,F.value-T.value)),ye=M(()=>{switch(d.value){case"ready":return B.value>0&&B.value<F.value?"Run Paused":"Ready to Raid";case"life-lost":return"Caught by a Warden";case"level-complete":return"Depth Cleared";case"game-over":return"Gold Lost";default:return""}}),ke=M(()=>{switch(d.value){case"ready":return B.value>0&&B.value<F.value?"Run paused mid-depth. Resume the raid to finish gathering every vein of gold.":"Guide Gruntag's mining cart through the tunnels and collect every shard of gold.";case"life-lost":return"Shake off the dust and dive back in before the goblin wardens regroup.";case"level-complete":return"You've emptied these tunnels. Claim your reward and descend deeper for richer veins.";case"game-over":return"The wardens overran the cart. Regroup, refit, and start a fresh run.";default:return""}}),Re=M(()=>{switch(d.value){case"ready":return"Begin Run";case"life-lost":return"Resume Run";case"level-complete":return"Descend Deeper";case"game-over":return"Restart Expedition";default:return"Resume"}}),Ce=M(()=>d.value!=="running"),Me=M(()=>Math.max(0,Math.ceil(D.value/1e3))),De=e=>{switch(e){case"ArrowUp":case"w":case"W":return"up";case"ArrowDown":case"s":case"S":return"down";case"ArrowLeft":case"a":case"A":return"left";case"ArrowRight":case"d":case"D":return"right";default:return null}},oe=(e,t,o)=>{if(!m.value[e])return;const s=[...m.value[e]];s[t]=o,m.value[e]=s,m.value=[...m.value]},U=(e,t)=>{var o;return((o=m.value[e])==null?void 0:o[t])==="wall"},Ee=()=>{C.splice(0,C.length),j.forEach((e,t)=>{C.push({id:`enemy-${t}`,label:e.label,row:e.row,col:e.col,direction:"left",state:"hunt",tickDelay:t+1,baseDelay:Math.max(3,6-Math.floor(S.value/2)),colorClass:e.colorClass,spawnRow:e.row,spawnCol:e.col,respawnCounter:0})})},K=()=>{n.row=z.row,n.col=z.col,n.direction="left",n.nextDirection="left"},re=(e="hunt")=>{C.forEach((t,o)=>{const s=j[o%j.length];t.row=s.row,t.col=s.col,t.direction="left",t.state=e,t.tickDelay=o+1,t.respawnCounter=0})},Se=()=>{T.value=m.value.reduce((e,t)=>e+t.filter(o=>o==="gold"||o==="power").length,0)},V=()=>{m.value=we(),Se(),ee.value=T.value,K(),Ee(),d.value="ready",R.value=!1,D.value=0,w.value=`Depth ${S.value} tunnels mapped. Awaiting orders.`},Te=()=>{fe.push("/")};let Y=null,q=140;const $=()=>{Y&&(clearInterval(Y),Y=null)},Ae=()=>Math.max(90,160-S.value*6),Pe=()=>{$(),q=Ae(),Y=window.setInterval(Ve,q)},se=()=>{d.value!=="running"&&(d.value==="level-complete"?(S.value+=1,V()):d.value==="game-over"?(S.value=1,O.value=0,W.value=3,V()):d.value==="life-lost"&&(K(),re(R.value?"frightened":"hunt")),d.value="running",w.value="Collect the gold and watch the wardens.",Pe())},Le=()=>{d.value="ready",w.value="Run paused. Resume when ready.",$()},ae=e=>{const t=A[e],o=n.row+t.row,s=n.col+t.col;return U(o,s)?!1:(n.row=o,n.col=s,n.direction=e,le(o,s),!0)},le=(e,t)=>{var s;const o=(s=m.value[e])==null?void 0:s[t];o==="gold"?(oe(e,t,"empty"),T.value-=1,O.value+=50,w.value="Gold gathered! Keep moving."):o==="power"&&(oe(e,t,"empty"),T.value-=1,O.value+=150,Oe()),T.value<=0&&Ge()},Oe=()=>{R.value=!0,D.value=6e3,C.forEach(e=>{e.state!=="respawning"&&(e.state="frightened",e.tickDelay=Math.max(e.tickDelay,2))}),w.value="Power surge! Wardens are on the run."},$e=()=>{R.value=!1,D.value=0,C.forEach(e=>{e.state==="frightened"&&(e.state="hunt")}),w.value="Surge faded. Stay sharp."},je=e=>{O.value+=250,e.state="respawning",e.row=e.spawnRow,e.col=e.spawnCol,e.respawnCounter=6,e.tickDelay=3,w.value=`${e.label} stunned!`},Be=()=>{if($(),W.value-=1,W.value<=0){d.value="game-over",w.value="The wardens overran the cart. You'll need a new plan.",de({title:"Expedition Failed",description:"All carts destroyed. Restart the run to reclaim the gold.",variant:"destructive"});return}d.value="life-lost",R.value=!1,D.value=0,K(),re("hunt"),w.value="You were caught! Regroup and head back in."},Ge=()=>{$(),d.value="level-complete",R.value=!1,D.value=0,O.value+=500,w.value=`Depth ${S.value} cleared. Claim your reward.`;const e=ot(Q);X.value=e,de({title:"Gold Secured!",description:`You cleared the tunnels and banked a ${N.singular.toLowerCase()}. Total ${N.plural}: ${e}`,variant:"success"})},Ne=(e,t)=>Math.abs(e-n.row)+Math.abs(t-n.col),We=e=>{if(e.state==="respawning"){e.respawnCounter-=1,e.respawnCounter<=0&&(e.state=R.value?"frightened":"hunt");return}const t=Object.keys(A).filter(a=>{const i=A[a],g=e.row+i.row,p=e.col+i.col;if(U(g,p))return!1;if(a===te[e.direction]){const c=A[e.direction],l=e.row+c.row,u=e.col+c.col;if(!U(l,u))return!1}return!0});if(!t.length){e.direction=te[e.direction];return}let o;if(t.length===1)o=t[0];else if(e.state==="frightened"){const a=Math.floor(Math.random()*t.length);o=t[a]}else if(Math.random()<.55){const a=Math.floor(Math.random()*t.length);o=t[a]}else{const a=t.map(c=>{const l=A[c];return Ne(e.row+l.row,e.col+l.col)}),i=Math.min(...a),g=t.filter((c,l)=>a[l]===i),p=Math.floor(Math.random()*g.length);o=g[p]}e.direction=o;const s=A[o];e.row+=s.row,e.col+=s.col},ze=()=>{for(const e of C)if(e.row===n.row&&e.col===n.col){if(e.state==="frightened")je(e);else if(e.state==="hunt"){Be();break}}},Fe=M(()=>{switch(n.direction){case"up":return"-90deg";case"down":return"90deg";case"left":return"180deg";default:return"0deg"}}),Ye=e=>{const t=["enemy-token",e.colorClass];return e.state==="frightened"&&t.push("enemy-frightened"),e.state==="respawning"&&t.push("enemy-respawning"),t.join(" ")},Ie=(e,t)=>C.filter(o=>o.row===e&&o.col===t),Ue=(e,t)=>n.row===e&&n.col===t,Ke=e=>{const t=Math.max(1,e.baseDelay-Math.floor(S.value/3)),o=e.state==="frightened"?1:0,s=e.state==="hunt"&&Math.random()<.4?1:0;return t+o+s},Ve=()=>{if(d.value!=="running"){$();return}const e=n.nextDirection;ae(e)||ae(n.direction)||le(n.row,n.col),C.forEach(o=>{o.tickDelay-=1,o.tickDelay<=0&&(We(o),o.tickDelay=Ke(o))}),ze(),R.value&&(D.value=Math.max(0,D.value-q),D.value<=0&&$e())},qe=e=>e==="wall"?"bg-[radial-gradient(circle_at_center,rgba(14,116,144,0.3),rgba(15,23,42,0.95))] border border-primary/50 shadow-[inset_0_0_18px_rgba(14,116,144,0.45)]":"bg-slate-950/60",ne=e=>{const t=De(e.key);t&&(n.nextDirection=t,e.preventDefault()),(e.key===" "||e.key==="Enter")&&d.value!=="running"&&(e.preventDefault(),se())};return He(()=>{V(),window.addEventListener("keydown",ne)}),Je(()=>{$(),window.removeEventListener("keydown",ne)}),(e,t)=>(h(),v("div",it,[t[15]||(t[15]=r("div",{class:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(10,10,10,0.5),transparent_70%)]"},null,-1)),t[16]||(t[16]=r("div",{class:"pointer-events-none absolute left-1/2 top-1/3 h-[560px] w-[560px] -translate-x-1/2 rounded-full bg-primary/20 blur-[120px]"},null,-1)),r("div",ct,[r("header",dt,[r("button",{type:"button",class:G(Ht),onClick:Te},[P(E(rt),{class:"h-5 w-5 transition group-hover:-translate-x-1"}),t[0]||(t[0]=L(" Back to Menu ",-1))]),r("div",ut,[r("div",ft,[r("div",pt,[P(E(st),{class:"h-4 w-4 text-accent"}),L(" "+f(E(N).plural),1)]),r("p",gt,f(X.value.toLocaleString()),1)]),r("div",vt,[r("div",ht,[P(E(ue),{class:"h-4 w-4 text-primary"}),t[1]||(t[1]=L(" Gold Banked ",-1))]),r("p",mt,f(O.value.toLocaleString()),1)]),r("div",bt,[r("div",wt,[P(E(at),{class:"h-4 w-4 text-emerald-400"}),t[2]||(t[2]=L(" Carts Remaining ",-1))]),r("p",xt,f(W.value),1)]),r("div",_t,[r("div",yt,[P(E(lt),{class:"h-4 w-4 text-accent"}),t[3]||(t[3]=L(" Depth ",-1))]),r("p",kt,f(S.value),1)])])]),r("div",Rt,[r("section",Ct,[r("div",Mt,[r("div",Dt,[t[4]||(t[4]=r("div",null,[r("h1",{class:"text-4xl font-black tracking-tight text-foreground md:text-5xl"},"Gold Rush"),r("p",{class:"text-sm text-muted-foreground"}," Navigate the haunted tunnels, gather every nugget, and dodge the goblin wardens on patrol. ")],-1)),r("div",Et,f(w.value),1)]),r("div",St,[r("div",Tt,[t[6]||(t[6]=r("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_bottom,rgba(250,204,21,0.08),transparent_55%)]"},null,-1)),r("div",{class:"relative z-10 grid gap-[6px]",style:ce(_e.value)},[(h(!0),v(H,null,J(xe.value,o=>(h(),v("div",{key:o.key,class:G(["relative flex items-center justify-center rounded-lg border border-slate-900/40 transition",qe(o.tile)])},[o.tile==="gold"?(h(),v("div",At)):o.tile==="power"?(h(),v("div",Pt)):I("",!0),Ue(o.row,o.col)?(h(),v("div",{key:2,class:"player-token",style:ce({transform:`rotate(${Fe.value})`})},null,4)):I("",!0),(h(!0),v(H,null,J(Ie(o.row,o.col),s=>(h(),v("div",{key:s.id,class:G(Ye(s))},[...t[5]||(t[5]=[r("div",{class:"enemy-eye left"},null,-1),r("div",{class:"enemy-eye right"},null,-1),r("div",{class:"enemy-teeth"},null,-1)])],2))),128))],2))),128))],4),Ce.value?(h(),v("div",Lt,[r("h2",Ot,f(ye.value),1),r("p",$t,f(ke.value),1),r("button",{type:"button",class:G([Jt,"mt-6"]),onClick:se},f(Re.value),1)])):I("",!0)])]),r("div",jt,[r("div",Bt,[r("span",Gt,[P(E(ue),{class:"h-4 w-4 text-amber-400"}),L(" "+f(B.value)+" / "+f(F.value),1)]),t[7]||(t[7]=r("span",null,"•",-1)),r("span",null,"Gold Remaining: "+f(T.value),1),t[8]||(t[8]=r("span",null,"•",-1)),R.value?(h(),v("span",Nt,"Power Surge: "+f(Me.value)+"s",1)):(h(),v("span",Wt,"Awaiting Rune Surge"))]),d.value==="running"?(h(),v("button",{key:0,type:"button",class:"inline-flex items-center gap-2 rounded-md border border-destructive/60 bg-destructive/20 px-5 py-2 text-sm font-semibold text-destructive transition hover:bg-destructive/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-destructive",onClick:Le}," Pause Run ")):I("",!0)])])]),r("aside",zt,[r("header",Ft,[t[9]||(t[9]=r("h2",{class:"text-lg font-semibold text-foreground"},"Run Intel",-1)),r("div",Yt,[P(E(nt),{class:"h-4 w-4 text-primary"}),L(" Power "+f(R.value?"Active":"Dormant"),1)])]),r("div",It,[t[14]||(t[14]=r("div",{class:"rounded-lg border border-border/60 bg-card/60 p-4"},[r("h3",{class:"text-sm font-semibold text-foreground"},"Controls"),r("ul",{class:"mt-2 space-y-1 text-xs leading-relaxed"},[r("li",null,"Use arrow keys or WASD to steer the cart."),r("li",null,"Collect all gold to clear the depth."),r("li",null,"Power shards stun wardens; crash into them while the surge lasts.")])],-1)),r("div",Ut,[t[12]||(t[12]=r("h3",{class:"text-sm font-semibold text-foreground"},"Tips",-1)),r("ul",Kt,[t[10]||(t[10]=r("li",null,"Wardens prefer straight tunnels—break line of sight by cutting corners.",-1)),t[11]||(t[11]=r("li",null,"Save power shards for cramped sectors to flip the chase.",-1)),r("li",null,"Every cleared depth awards a "+f(E(N).singular.toLowerCase())+". Keep the streak alive.",1)])]),r("div",Vt,[t[13]||(t[13]=r("h3",{class:"text-sm font-semibold text-foreground"},"Enemy Intel",-1)),r("ul",qt,[(h(!0),v(H,null,J(C,o=>(h(),v("li",{key:o.id,class:"flex items-center justify-between gap-2"},[r("span",Zt,f(o.label),1),r("span",{class:G(["rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide",o.state==="hunt"?"bg-red-500/20 text-red-300":o.state==="frightened"?"bg-emerald-500/20 text-emerald-300":"bg-slate-500/20 text-slate-300"])},f(o.state),3)]))),128))])])])])])])]))}}),io=Xe(Qt,[["__scopeId","data-v-0b0204b8"]]);export{io as default};
