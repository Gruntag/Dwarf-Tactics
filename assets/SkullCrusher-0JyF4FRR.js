import{d as ie,r as m,v as H,l as M,w as le,o as de,m as ce,a as u,b as e,n as I,e as c,u as l,h as g,t as n,p as B,F as K,f as N,q as V,i as ue,s as z,j as p,y as pe,T as me,_ as be}from"./index-B48t8f1O.js";import{R as fe,a as ge,b as ve}from"./resources-B117707i.js";import{A as xe}from"./arrow-left-BHJnkpsX.js";import{T as he}from"./trophy-CywtLe5a.js";import{S as $}from"./skull-DMwwAd8c.js";import{T as we}from"./timer-CbB9GUWz.js";import{F as _e}from"./flame-BNfP7fCt.js";import{H as A}from"./hammer-B3YPJb-g.js";const ye={class:"relative min-h-screen overflow-hidden bg-[var(--gradient-game)] p-4 md:p-8"},ke={class:"relative z-10 mx-auto max-w-6xl space-y-8"},Se={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},Me={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4"},Ce={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},Te={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},Re={class:"mt-1 text-2xl font-semibold text-foreground"},Ie={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},$e={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},Ge={class:"mt-1 text-2xl font-semibold text-foreground"},je={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},Le={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},Ue={class:"mt-1 text-2xl font-semibold text-foreground"},Ee={class:"rounded-lg border border-border/60 bg-card/80 px-4 py-3 backdrop-blur"},De={class:"flex items-center gap-2 text-xs uppercase tracking-widest text-muted-foreground"},Fe={class:"mt-1 text-2xl font-semibold text-foreground"},He={class:"grid gap-6 lg:grid-cols-[2fr_1fr]"},Be={class:"rounded-xl border border-border/60 bg-card/80 p-6 backdrop-blur"},Ke={class:"flex flex-col gap-6"},Ne={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ve={class:"flex items-center gap-4"},ze={class:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/20"},Ae={class:"relative mx-auto w-full max-w-4xl"},Oe={class:"relative aspect-[4/3] w-full overflow-hidden rounded-2xl border border-border/60 bg-gradient-to-br from-black/60 via-slate-900/70 to-black/60 p-6 shadow-[inset_0_0_48px_rgba(0,0,0,0.55)]"},We=["onClick"],Ye={key:0,class:"absolute inset-0 rounded-full bg-white/30 mix-blend-overlay animate-ping-slow"},qe={class:"absolute bottom-2 rounded-full border border-border/50 bg-card/70 px-2 text-[10px] font-semibold uppercase tracking-wide text-muted-foreground backdrop-blur"},Pe={class:"flex flex-wrap items-center justify-between gap-4 text-sm text-muted-foreground"},Je={class:"flex flex-wrap items-center gap-2"},Qe={class:"inline-flex items-center gap-1 rounded-full border border-border/60 bg-card/70 px-3 py-1"},Xe={key:0},Ze={class:"flex items-center gap-3"},et={class:"rounded-xl border border-border/60 bg-card/70 p-6 text-sm text-muted-foreground backdrop-blur"},tt={class:"flex items-center justify-between"},st={class:"flex items-center gap-2 rounded-lg border border-border/60 bg-card/80 px-3 py-1 text-xs font-semibold text-foreground"},ot={class:"mt-4 space-y-4"},rt={class:"rounded-lg border border-border/60 bg-card/60 p-4"},nt={class:"mt-2 space-y-1 text-xs"},G="skullCrusher",at="group inline-flex items-center gap-2 rounded-md border border-border bg-card/70 px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-card focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary",it=ie({__name:"SkullCrusher",setup(lt){const O=ue(),v={rows:3,cols:4,activeSlots:3,spawnIntervalMs:1e3,hitRadius:0},w=fe[G],C=m(ge(G)),j=m(1),b=m(0),x=m(0),T=m(0),_=m(60),f=m(!1),h=m(0),r=H({...v}),i=H([]),W=M(()=>i.filter(s=>s.state==="active").length),Y=M(()=>{const s=[];for(let t=0;t<r.rows;t+=1)for(let o=0;o<r.cols;o+=1)s.push({row:t,col:o,key:`cell-${t}-${o}`});return s});let y=null,k=null;const q={entering:"animate-slide-in",active:"animate-bob",running:"animate-run-away",hit:"animate-crushing",despawning:"animate-fade-out"},P=M(()=>({gridTemplateColumns:`repeat(${r.cols}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${r.rows}, minmax(0, 1fr))`})),L=(s,t)=>`${s}-${t}`,J=M(()=>new Set(i.filter(s=>s.state!=="despawning").map(s=>L(s.row,s.col)))),Q=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`goblin-${Date.now()}-${Math.random().toString(16).slice(2)}`,X=()=>{const s=J.value,t=10;for(let o=0;o<t;o+=1){const a=Math.floor(Math.random()*r.rows),d=Math.floor(Math.random()*r.cols),S=L(a,d);if(!s.has(S))return{row:a,col:d}}return null},U=()=>{if(!f.value||W.value>=r.activeSlots)return;const s=X();if(!s)return;const t={id:Q(),row:s.row,col:s.col,state:"entering",spawnedAt:Date.now()};i.push(t),setTimeout(()=>{const o=i.find(a=>a.id===t.id);o&&o.state==="entering"&&(o.state="active",Z(o.id))},120)},Z=s=>{setTimeout(()=>{const t=i.find(o=>o.id===s);!t||!f.value||t.state==="active"&&(t.state="running",T.value+=1,b.value=0,setTimeout(()=>E(t.id),200))},r.spawnIntervalMs*1.5)},E=s=>{const t=i.findIndex(o=>o.id===s);t>=0&&i.splice(t,1)},ee=(s,t)=>{if(!f.value)return;const o=[],a=r.hitRadius;for(const d of i){if(d.state!=="active")continue;Math.max(Math.abs(d.row-s),Math.abs(d.col-t))<=a&&o.push(d)}if(!o.length){b.value=0;return}o.forEach((d,S)=>{d.state="hit",setTimeout(()=>E(d.id),260+S*30)}),b.value+=o.length,h.value=Math.max(b.value,h.value),x.value+=o.length*(1+b.value*.1)},te=()=>{k=window.setInterval(()=>{if(_.value<=0){F();return}_.value-=1},1e3)},se=()=>{y=window.setInterval(U,r.spawnIntervalMs)},R=()=>{y&&(clearInterval(y),y=null),k&&(clearInterval(k),k=null)},oe=()=>{i.splice(0,i.length),x.value=0,b.value=0,h.value=0,T.value=0,_.value=60},D=()=>{const s=j.value;r.rows=Math.min(5,v.rows+Math.floor((s-1)/2)),r.cols=Math.min(6,v.cols+Math.floor((s-1)/2)),r.activeSlots=Math.min(r.rows*r.cols,v.activeSlots+Math.floor(s/2)),r.spawnIntervalMs=Math.max(350,v.spawnIntervalMs-s*70),r.hitRadius=s>=4?1:0},re=()=>{oe(),D(),f.value=!0,U(),se(),te()},F=()=>{R(),f.value=!1;const s=Math.round(x.value);if(z({title:"Skull Crusher session complete!",description:`You smashed ${s} goblins. High combo: ${h.value}.`}),s>=60){const t=ve(G);C.value=t,z({title:`${w.singular} Earned!`,description:`Gruntag honors your skull crushing prowess. Total ${w.plural}: ${t}`,variant:"success"})}},ne=()=>{O.push("/")};le(f,s=>{s||R()}),de(()=>{D()}),ce(()=>{R()});const ae=s=>({animationDuration:s.state==="active"?`${r.spawnIntervalMs*.8}ms`:void 0});return(s,t)=>(p(),u("div",ye,[t[14]||(t[14]=e("div",{class:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(10,10,10,0.5),transparent_70%)]"},null,-1)),t[15]||(t[15]=e("div",{class:"pointer-events-none absolute left-1/2 top-1/3 h-[520px] w-[520px] -translate-x-1/2 rounded-full bg-primary/20 blur-[120px]"},null,-1)),e("div",ke,[e("header",Se,[e("button",{type:"button",class:I(at),onClick:ne},[c(l(xe),{class:"h-5 w-5 transition group-hover:-translate-x-1"}),t[0]||(t[0]=g(" Back to Menu ",-1))]),e("div",Me,[e("div",Ce,[e("div",Te,[c(l(he),{class:"h-4 w-4 text-accent"}),g(" "+n(l(w).plural),1)]),e("p",Re,n(C.value.toLocaleString()),1)]),e("div",Ie,[e("div",$e,[c(l($),{class:"h-4 w-4 text-accent"}),t[1]||(t[1]=g(" Score ",-1))]),e("p",Ge,n(x.value.toFixed(0)),1)]),e("div",je,[e("div",Le,[c(l(we),{class:"h-4 w-4 text-primary"}),t[2]||(t[2]=g(" Time Left ",-1))]),e("p",Ue,n(Math.max(_.value,0))+"s",1)]),e("div",Ee,[e("div",De,[c(l(_e),{class:"h-4 w-4 text-accent"}),t[3]||(t[3]=g(" Combo ",-1))]),e("p",Fe,"x"+n(b.value),1)])])]),e("div",He,[e("section",Be,[e("div",Ke,[e("div",Ne,[e("div",Ve,[e("div",ze,[c(l(A),{class:"h-6 w-6 text-primary"})]),t[4]||(t[4]=e("div",null,[e("h1",{class:"text-4xl font-black tracking-tight text-foreground"},"Skull Crusher"),e("p",{class:"text-sm text-muted-foreground"}," Whack the goblins before they escape. Keep combos alive to climb the leaderboard. ")],-1))]),t[5]||(t[5]=e("div",{class:"rounded-lg border border-border/60 bg-card/70 px-4 py-3 text-sm text-muted-foreground backdrop-blur"}," Crush goblins as fast as you can. Higher levels spawn more foes and shorten their patience. ",-1))]),e("div",Ae,[e("div",Oe,[t[7]||(t[7]=e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_bottom,rgba(34,197,94,0.05),transparent_55%)]"},null,-1)),e("div",{class:"relative grid h-full w-full gap-2",style:B(P.value)},[(p(!0),u(K,null,N(Y.value,o=>(p(),u("button",{key:o.key,type:"button",class:I(["group relative isolate flex items-end justify-center overflow-hidden rounded-xl border border-border/40 bg-card/40 transition hover:border-primary/70 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-accent focus-visible:ring-offset-background",["holo-cell"]]),onClick:a=>ee(o.row,o.col)},[t[6]||(t[6]=e("div",{class:"pointer-events-none absolute inset-0 bg-gradient-to-t from-primary/10 via-transparent to-transparent opacity-0 transition group-hover:opacity-30"},null,-1)),c(me,{name:"goblin",tag:"div"},{default:pe(()=>[(p(!0),u(K,null,N(i.filter(a=>a.row===o.row&&a.col===o.col),a=>(p(),u("div",{key:a.id,class:"relative flex h-full w-full items-center justify-center"},[e("div",{class:I(["goblin relative flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-lime-500 via-green-600 to-emerald-700 shadow-[0_12px_24px_rgba(16,185,129,0.35)] ring-2 ring-lime-300/70",q[a.state]]),style:B(ae(a))},[c(l($),{class:"h-10 w-10 -translate-y-0.5 text-black/80 drop-shadow-[0_4px_6px_rgba(0,0,0,0.45)]"}),a.state==="hit"?(p(),u("div",Ye)):V("",!0)],6),e("div",qe,n(a.state),1)]))),128))]),_:2},1024)],8,We))),128))],4)])]),e("div",Pe,[e("div",Je,[e("span",Qe," Level "+n(j.value),1),t[8]||(t[8]=e("span",{class:"hidden sm:inline"},"•",-1)),e("span",null,"Speed: "+n((1e3/r.spawnIntervalMs).toFixed(2))+" goblins/s",1),t[9]||(t[9]=e("span",null,"•",-1)),e("span",null,"Grid: "+n(r.rows)+" x "+n(r.cols),1),r.hitRadius>0?(p(),u("span",Xe,"• Hammer reach: "+n(r.hitRadius),1)):V("",!0)]),e("div",Ze,[f.value?(p(),u("button",{key:1,type:"button",class:"inline-flex items-center gap-2 rounded-md border border-destructive/60 bg-destructive/20 px-5 py-2 text-sm font-semibold text-destructive transition hover:bg-destructive/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-destructive",onClick:F}," Stop Round ")):(p(),u("button",{key:0,type:"button",class:"inline-flex items-center gap-2 rounded-md bg-gradient-to-r from-primary via-accent to-primary px-5 py-2 text-sm font-semibold text-primary-foreground shadow-lg transition hover:from-primary/90 hover:via-accent/90 hover:to-primary/80 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-accent",onClick:re},[c(l(A),{class:"h-4 w-4"}),t[10]||(t[10]=g(" Start Crushing ",-1))]))])])])]),e("aside",et,[e("header",tt,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-foreground"},"War Table",-1)),e("div",st,[c(l($),{class:"h-4 w-4 text-accent"}),g(" "+n(l(w).singular)+": "+n(C.value),1)])]),e("div",ot,[e("div",rt,[t[12]||(t[12]=e("h3",{class:"text-sm font-semibold text-foreground"},"Round Stats",-1)),e("ul",nt,[e("li",null,"Score: "+n(x.value.toFixed(0)),1),e("li",null,"High Combo: "+n(h.value),1),e("li",null,"Missed Goblins: "+n(T.value),1),e("li",null,"Spawn Interval: "+n(r.spawnIntervalMs)+" ms",1)])]),t[13]||(t[13]=e("div",{class:"rounded-lg border border-border/60 bg-card/60 p-4"},[e("h3",{class:"text-sm font-semibold text-foreground"},"Tips"),e("p",{class:"mt-2 text-xs leading-relaxed"}," Goblins enter, taunt, and sprint. Keep combos alive for bonus points. Upgrade your hammer reach to smash multiple goblins at once. ")],-1))])])])])]))}}),vt=be(it,[["__scopeId","data-v-3b7b359b"]]);export{vt as default};
